---
import MarkdownIt from 'markdown-it';
import {dateFormatter} from 'src/shared/utilities.js';
const { short_date, post: {slug, collection, data: { excerpt, headline, read_time, published }} } = Astro.props;
const md = new MarkdownIt({ html: true });
const article_url = `/${collection}/${slug}/`;
---
<style lang="scss" is:global>
  [data-posts-article] {
    position: relative;

    .meta {
      display: flex;
      justify-content: space-between;
      position: absolute;
      width: 100%;
      top: 1rem;

      > div {
        background-color: ($color_secondary)90;
        padding: .25em .5em;
      }

      .date, .read-time {
        border-radius: $radius_md;
      }

      .date {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        padding-right: .75em;
      }

      .read-time {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        padding-left: .75em;
      }
    }
    .content {
      .title {
        text-decoration: none;
      }
    }
  }
</style>
<article data-posts-article>
  <a href={article_url}>
    <!-- <GatsbyImage
      alt={card.alt}
      copyright={card.copyright}
      image={getImage(card)}
      className='image'
    /> -->
  </a>
  <div class="meta">
    <div class='date step-down'>
      {dateFormatter(short_date).format(published)}
    </div>
    <div class='read-time step-down'>
      {read_time} min read
    </div>
  </div>
  <div class="content">
    <a class="title" title={headline} href={article_url}>
      <h3 class="h2">
        {headline}
      </h3>
    </a>
    { excerpt && <div class="rt" set:html={md.render(excerpt)}></div>}
    <p><a title={headline} href={article_url}>
      Read More&hellip;
    </a></p>
  </div>
</article>